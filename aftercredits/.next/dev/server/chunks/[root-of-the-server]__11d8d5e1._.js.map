{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/jennifer/personalprojects/AfterCredits/aftercredits/src/app/api/storage/signed-url/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { createClient as createSupabaseClient } from \"@supabase/supabase-js\";\n\nconst SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY;\nconst supabaseAdmin =\n  SUPABASE_URL && SUPABASE_SERVICE_ROLE_KEY\n    ? createSupabaseClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY)\n    : null;\n\nexport async function GET(request: Request) {\n  const url = new URL(request.url);\n  const path = url.searchParams.get(\"path\");\n  if (!path)\n    return NextResponse.json({ error: \"missing path\" }, { status: 400 });\n\n  if (!supabaseAdmin)\n    return NextResponse.json(\n      { error: \"service key not configured\" },\n      { status: 500 }\n    );\n\n  try {\n    const { data, error } = await supabaseAdmin.storage\n      .from(\"memories\")\n      .createSignedUrl(path, 60 * 15);\n    if (error)\n      return NextResponse.json({ error: error.message }, { status: 500 });\n    return NextResponse.json({ url: data.signedUrl });\n  } catch (err) {\n    console.error(err);\n    return NextResponse.json(\n      { error: \"Failed to create signed URL\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM;AACN,MAAM,4BAA4B,QAAQ,GAAG,CAAC,yBAAyB;AACvE,MAAM,gBACJ,gBAAgB,4BACZ,IAAA,6PAAoB,EAAC,cAAc,6BACnC;AAEC,eAAe,IAAI,OAAgB;IACxC,MAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;IAC/B,MAAM,OAAO,IAAI,YAAY,CAAC,GAAG,CAAC;IAClC,IAAI,CAAC,MACH,OAAO,oMAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAe,GAAG;QAAE,QAAQ;IAAI;IAEpE,IAAI,CAAC,eACH,OAAO,oMAAY,CAAC,IAAI,CACtB;QAAE,OAAO;IAA6B,GACtC;QAAE,QAAQ;IAAI;IAGlB,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,cAAc,OAAO,CAChD,IAAI,CAAC,YACL,eAAe,CAAC,MAAM,KAAK;QAC9B,IAAI,OACF,OAAO,oMAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;QACnE,OAAO,oMAAY,CAAC,IAAI,CAAC;YAAE,KAAK,KAAK,SAAS;QAAC;IACjD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,oMAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA8B,GACvC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}