{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/jennifer/personalprojects/AfterCredits/aftercredits/src/utils/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY;\n\nexport const createClient = () =>\n  createBrowserClient(supabaseUrl!, supabaseKey!);\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,eAAe,IAC1B,IAAA,qPAAmB,EAAC,aAAc"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/jennifer/personalprojects/AfterCredits/aftercredits/src/app/components/newframe.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { createClient } from \"../../utils/supabase/client\";\n\nexport default function NewFrame() {\n  const router = useRouter();\n  const [title, setTitle] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [location, setLocation] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [file, setFile] = useState<File | null>(null);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const [fileError, setFileError] = useState<string | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [loading, setLoading] = useState(false);\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setLoading(true);\n\n    let imagePath: string | null = null;\n    try {\n      if (file) {\n        setUploading(true);\n        const supabase = createClient();\n        const filePath = `memories/${Date.now()}-${file.name}`;\n\n        const { error: uploadError } = await supabase.storage\n          .from(\"memories\")\n          .upload(filePath, file);\n\n        if (uploadError) throw uploadError;\n        // For private storage, store the file path and let the server generate signed URLs on demand\n        imagePath = filePath;\n        setUploading(false);\n      }\n      // include authenticated user id when available\n      let userId: string | null = null;\n      try {\n        const { data: userData } = await createClient().auth.getUser();\n        userId = userData?.user?.id ?? null;\n      } catch (err) {\n        // ignore - user may not be signed in\n      }\n\n      const res = await fetch(\"/api/memory\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          title,\n          date,\n          location,\n          description,\n          imagePath,\n          userId,\n        }),\n      });\n      if (!res.ok) throw new Error(\"Failed to create memory\");\n\n      router.push(\"/\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to save memory\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    return () => {\n      if (previewUrl) URL.revokeObjectURL(previewUrl);\n    };\n  }, [previewUrl]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-8\">\n      <div className=\"w-full max-w-2xl\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold mb-2\">Add a New Memory</h1>\n          <p className=\"text-gray-400 text-sm\">\n            Capture a special moment together\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"max-w-2xl w-full space-y-4\">\n          <div>\n            <label className=\"block text-sm\">Title</label>\n            <input\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              className=\"w-full px-3 py-2 rounded-md bg-black/60 border border-border\"\n            />\n          </div>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm\">Date</label>\n              <input\n                type=\"date\"\n                value={date}\n                onChange={(e) => setDate(e.target.value)}\n                className=\"w-full px-3 py-2 rounded-md bg-black/60 border border-border\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm\">Location</label>\n              <input\n                value={location}\n                onChange={(e) => setLocation(e.target.value)}\n                className=\"w-full px-3 py-2 rounded-md bg-black/60 border border-border\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm\">Description</label>\n            <textarea\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              className=\"w-full px-3 py-2 rounded-md bg-black/60 border border-border\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Photos</label>\n            <input\n              className=\"border-2 border-dashed border-red-900/50 rounded-lg p-8 text-center cursor-pointer hover:border-red-600 hover:bg-black/40 transition-all duration-300\"\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={(e) => {\n                const f = e.target.files?.[0] ?? null;\n                if (!f) {\n                  setFile(null);\n                  setPreviewUrl(null);\n                  setFileError(null);\n                  return;\n                }\n                if (!f.type.startsWith(\"image/\")) {\n                  setFile(null);\n                  setPreviewUrl(null);\n                  setFileError(\"Please select an image file\");\n                  return;\n                }\n                if (f.size > 5 * 1024 * 1024) {\n                  setFile(null);\n                  setPreviewUrl(null);\n                  setFileError(\"Image must be smaller than 5MB\");\n                  return;\n                }\n                setFileError(null);\n                setFile(f);\n                setPreviewUrl(URL.createObjectURL(f));\n              }}\n            />\n            {fileError && (\n              <p className=\"text-sm text-red-500 mt-1\">{fileError}</p>\n            )}\n            {previewUrl && (\n              <div className=\"mt-2\">\n                <div className=\"flex items-start gap-3\">\n                  <img\n                    src={previewUrl}\n                    alt=\"preview\"\n                    className=\"w-48 h-32 object-cover rounded\"\n                  />\n                  <div>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setFile(null);\n                        setPreviewUrl(null);\n                      }}\n                      className=\"text-sm text-red-500\"\n                    >\n                      Remove\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading || uploading}\n              className=\"w-full bg-gradient-to-r from-red-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-red-700 hover:to-pink-700 transition-all duration-300 shadow-lg hover:shadow-red-600/50 bg-primary disabled:opacity-60\"\n            >\n              {uploading\n                ? \"Uploading image…\"\n                : loading\n                ? \"Saving…\"\n                : \"Save Memory\"}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n/* old content removed */\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,SAAS,IAAA,mMAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qQAAQ,EAAC;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qQAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qQAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,qQAAQ,EAAC;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qQAAQ,EAAc;IAC9C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,qQAAQ,EAAgB;IAC5D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qQAAQ,EAAgB;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qQAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qQAAQ,EAAC;IACvC,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAChB,WAAW;QAEX,IAAI,YAA2B;QAC/B,IAAI;YACF,IAAI,MAAM;gBACR,aAAa;gBACb,MAAM,WAAW,IAAA,sMAAY;gBAC7B,MAAM,WAAW,CAAC,SAAS,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,EAAE;gBAEtD,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,OAAO,CAClD,IAAI,CAAC,YACL,MAAM,CAAC,UAAU;gBAEpB,IAAI,aAAa,MAAM;gBACvB,6FAA6F;gBAC7F,YAAY;gBACZ,aAAa;YACf;YACA,+CAA+C;YAC/C,IAAI,SAAwB;YAC5B,IAAI;gBACF,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,IAAA,sMAAY,IAAG,IAAI,CAAC,OAAO;gBAC5D,SAAS,UAAU,MAAM,MAAM;YACjC,EAAE,OAAO,KAAK;YACZ,qCAAqC;YACvC;YAEA,MAAM,MAAM,MAAM,MAAM,eAAe;gBACrC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA;oBACA;oBACA;oBACA;oBACA;gBACF;YACF;YACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAE7B,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,sQAAS,EAAC;QACR,OAAO;YACL,IAAI,YAAY,IAAI,eAAe,CAAC;QACtC;IACF,GAAG;QAAC;KAAW;IAEf,qBACE,kSAAC;QAAI,WAAU;kBACb,cAAA,kSAAC;YAAI,WAAU;;8BACb,kSAAC;oBAAI,WAAU;;sCACb,kSAAC;4BAAG,WAAU;sCAA0B;;;;;;sCACxC,kSAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;8BAKvC,kSAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,kSAAC;;8CACC,kSAAC;oCAAM,WAAU;8CAAgB;;;;;;8CACjC,kSAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,WAAU;;;;;;;;;;;;sCAGd,kSAAC;4BAAI,WAAU;;8CACb,kSAAC;;sDACC,kSAAC;4CAAM,WAAU;sDAAgB;;;;;;sDACjC,kSAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;4CACvC,WAAU;;;;;;;;;;;;8CAGd,kSAAC;;sDACC,kSAAC;4CAAM,WAAU;sDAAgB;;;;;;sDACjC,kSAAC;4CACC,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,WAAU;;;;;;;;;;;;;;;;;;sCAKhB,kSAAC;;8CACC,kSAAC;oCAAM,WAAU;8CAAgB;;;;;;8CACjC,kSAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,WAAU;;;;;;;;;;;;sCAId,kSAAC;;8CACC,kSAAC;oCAAM,WAAU;8CAAiC;;;;;;8CAClD,kSAAC;oCACC,WAAU;oCACV,MAAK;oCACL,QAAO;oCACP,UAAU,CAAC;wCACT,MAAM,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;wCACjC,IAAI,CAAC,GAAG;4CACN,QAAQ;4CACR,cAAc;4CACd,aAAa;4CACb;wCACF;wCACA,IAAI,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW;4CAChC,QAAQ;4CACR,cAAc;4CACd,aAAa;4CACb;wCACF;wCACA,IAAI,EAAE,IAAI,GAAG,IAAI,OAAO,MAAM;4CAC5B,QAAQ;4CACR,cAAc;4CACd,aAAa;4CACb;wCACF;wCACA,aAAa;wCACb,QAAQ;wCACR,cAAc,IAAI,eAAe,CAAC;oCACpC;;;;;;gCAED,2BACC,kSAAC;oCAAE,WAAU;8CAA6B;;;;;;gCAE3C,4BACC,kSAAC;oCAAI,WAAU;8CACb,cAAA,kSAAC;wCAAI,WAAU;;0DACb,kSAAC;gDACC,KAAK;gDACL,KAAI;gDACJ,WAAU;;;;;;0DAEZ,kSAAC;0DACC,cAAA,kSAAC;oDACC,MAAK;oDACL,SAAS;wDACP,QAAQ;wDACR,cAAc;oDAChB;oDACA,WAAU;8DACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCASX,kSAAC;sCACC,cAAA,kSAAC;gCACC,MAAK;gCACL,UAAU,WAAW;gCACrB,WAAU;0CAET,YACG,qBACA,UACA,YACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlB,EACA,uBAAuB"}}]
}