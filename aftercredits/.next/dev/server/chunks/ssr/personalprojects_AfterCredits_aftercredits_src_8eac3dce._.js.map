{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jennifer/personalprojects/AfterCredits/aftercredits/src/utils/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY;\n\nexport const createClient = () =>\n  createBrowserClient(supabaseUrl!, supabaseKey!);\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,eAAe,IAC1B,IAAA,qPAAmB,EAAC,aAAc"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/jennifer/personalprojects/AfterCredits/aftercredits/src/app/components/addmemoryform.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { Upload } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\n\n// This should match your actual Supabase client utility\nimport { createClient } from \"../../utils/supabase/client\";\n\ntype FormDataShape = {\n  title: string;\n  date: string;\n  location: string;\n  whatWeDid: string;\n  thoughts: string;\n};\n\ntype Photo = {\n  file: File;\n  previewUrl: string;\n  name: string;\n  uploaded: boolean;\n  storagePath: string | null;\n};\n\nexport default function AddMemoryForm() {\n  const router = useRouter();\n  const [formData, setFormData] = useState<FormDataShape>({\n    title: \"\",\n    date: \"\",\n    location: \"\",\n    whatWeDid: \"\",\n    thoughts: \"\",\n  });\n\n  const [uploadedPhotos, setUploadedPhotos] = useState<Photo[]>([]);\n  const [focusedField, setFocusedField] = useState<string | null>(null);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [uploading, setUploading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  // Cleanup preview URLs on unmount\n  useEffect(() => {\n    return () => {\n      // revoke any still-active preview URLs when the component unmounts\n      uploadedPhotos.forEach((photo) => {\n        if (photo.previewUrl) URL.revokeObjectURL(photo.previewUrl);\n      });\n    };\n    // Intentionally only run on unmount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const formatDate = (value: string) => {\n    // Remove all non-numeric characters\n    const numbers = value.replace(/\\D/g, \"\");\n\n    // Format as mm/dd/yyyy\n    let formatted = \"\";\n    if (numbers.length > 0) {\n      formatted = numbers.substring(0, 2);\n      if (numbers.length > 2) {\n        formatted += \"/\" + numbers.substring(2, 4);\n      }\n      if (numbers.length > 4) {\n        formatted += \"/\" + numbers.substring(4, 8);\n      }\n    }\n\n    return formatted;\n  };\n\n  const handleInputChange = (field: keyof FormDataShape, value: string) => {\n    if (field === \"date\") {\n      value = formatDate(value);\n    }\n\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: \"\",\n      }));\n    }\n  };\n\n  const handlePhotoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const fileList = e.target.files;\n    if (!fileList || fileList.length === 0) return;\n    const files = Array.from(fileList);\n\n    // Validate files\n    const validFiles: File[] = [];\n    const fileErrors: string[] = [];\n\n    files.forEach((file) => {\n      if (!file.type.startsWith(\"image/\")) {\n        fileErrors.push(`${file.name} is not an image`);\n        return;\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        fileErrors.push(`${file.name} is larger than 5MB`);\n        return;\n      }\n      validFiles.push(file);\n    });\n\n    if (fileErrors.length > 0) {\n      setErrors((prev) => ({\n        ...prev,\n        photos: fileErrors.join(\", \"),\n      }));\n    }\n\n    // Create preview URLs for valid files\n    const newPhotos: Photo[] = validFiles.map((file) => ({\n      file,\n      previewUrl: URL.createObjectURL(file),\n      name: file.name,\n      uploaded: false,\n      storagePath: null,\n    }));\n\n    setUploadedPhotos((prev) => [...prev, ...newPhotos]);\n\n    // Clear photos error if there were valid files\n    if (validFiles.length > 0 && errors.photos) {\n      setErrors((prev) => ({\n        ...prev,\n        photos: \"\",\n      }));\n    }\n  };\n\n  const removePhoto = (index: number) => {\n    const photo = uploadedPhotos[index];\n    if (photo.previewUrl) {\n      URL.revokeObjectURL(photo.previewUrl);\n    }\n    setUploadedPhotos((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  const uploadPhotosToSupabase = async (): Promise<string[] | null> => {\n    if (uploadedPhotos.length === 0) return [];\n\n    setUploading(true);\n    const uploadedPaths = [];\n\n    try {\n      const supabase = createClient();\n\n      for (let i = 0; i < uploadedPhotos.length; i++) {\n        const photo = uploadedPhotos[i];\n\n        if (photo.uploaded && photo.storagePath) {\n          // Already uploaded\n          uploadedPaths.push(photo.storagePath);\n          continue;\n        }\n\n        // Sanitize filename and upload to server-side endpoint\n        const safeName = photo.file.name\n          .replace(/\\s+/g, \"-\")\n          .replace(/[^a-zA-Z0-9-_.]/g, \"\");\n        const filePath = `memories/${Date.now()}-${safeName}`;\n\n        // Upload via server endpoint which uses the service role key\n        const form = new FormData();\n        form.append(\"file\", photo.file);\n        form.append(\"path\", filePath);\n\n        const uploadRes = await fetch(\"/api/storage/upload\", {\n          method: \"POST\",\n          body: form,\n        });\n        const uploadJson = await uploadRes.json();\n        if (!uploadRes.ok) {\n          // surface a helpful message for common RLS errors\n          const msg = uploadJson?.error ?? `Failed to upload ${photo.name}`;\n          if (msg.includes(\"row-level security\")) {\n            throw new Error(\n              `Failed to upload ${photo.name}: storage policy prevents anonymous uploads. Please sign in or use the server upload.`\n            );\n          }\n          throw new Error(`Failed to upload ${photo.name}: ${msg}`);\n        }\n\n        uploadedPaths.push(uploadJson.path || filePath);\n\n        // Mark as uploaded immutably\n        setUploadedPhotos((prev) =>\n          prev.map((p, idx) =>\n            idx === i\n              ? {\n                  ...p,\n                  uploaded: true,\n                  storagePath: uploadJson.path || filePath,\n                }\n              : p\n          )\n        );\n      }\n\n      return uploadedPaths;\n    } catch (error: any) {\n      console.error(\"Upload error:\", error);\n      setErrors((prev) => ({\n        ...prev,\n        photos: error.message || \"Failed to upload photos\",\n      }));\n      return null;\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.title.trim()) {\n      newErrors.title = \"Title is required\";\n    }\n\n    if (!formData.date.trim()) {\n      newErrors.date = \"Date is required\";\n    } else if (formData.date.length < 10) {\n      newErrors.date = \"Please enter a complete date (mm/dd/yyyy)\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const onFormSubmit = async () => {\n    setSaving(true);\n\n    try {\n      // First, upload all photos to Supabase Storage\n      const imagePaths = await uploadPhotosToSupabase();\n\n      if (imagePaths === null) {\n        // Upload failed\n        setSaving(false);\n        return;\n      }\n\n      // Get authenticated user ID if available\n      let userId = null;\n      /* Uncomment to get actual user:\n    try {\n      const supabase = createClient();\n      const { data: userData } = await supabase.auth.getUser();\n      userId = userData?.user?.id ?? null;\n    } catch (err) {\n      console.log('User not authenticated');\n    }\n    */\n\n      // Parse date from mm/dd/yyyy to ISO format (safely)\n      const [month, day, year] = formData.date.split(\"/\");\n      let isoDate: string | null = null;\n      if (month && day && year) {\n        const d = new Date(`${year}-${month}-${day}`);\n        if (!Number.isNaN(d.getTime())) isoDate = d.toISOString();\n      }\n\n      // Prepare the payload with array of image paths\n      const payload = {\n        title: formData.title,\n        date: isoDate,\n        location: formData.location || null,\n        description:\n          `${formData.whatWeDid}\\n\\n${formData.thoughts}`.trim() || null,\n        imagePaths: imagePaths, // Store ALL image paths as array\n        userId: userId,\n      };\n\n      console.log(\"Submitting payload:\", payload);\n\n      // Submit to API\n      const response = await fetch(\"/api/memory\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n\n      if (!response.ok) {\n        let message = \"Failed to save memory\";\n        try {\n          const errJson = await response.json();\n          message = errJson?.error ?? errJson?.message ?? message;\n        } catch {\n          // ignore\n        }\n        throw new Error(message);\n      }\n\n      const result = await response.json();\n      console.log(\"Memory saved:\", result);\n\n      // Clear form on success\n      setFormData({\n        title: \"\",\n        date: \"\",\n        location: \"\",\n        whatWeDid: \"\",\n        thoughts: \"\",\n      });\n\n      // Clean up uploaded photos\n      setUploadedPhotos((prev) => {\n        prev.forEach((photo) => {\n          if (photo.previewUrl) URL.revokeObjectURL(photo.previewUrl);\n        });\n        return [];\n      });\n      setErrors({});\n\n      router.push(\"/\");\n    } catch (error) {\n      console.error(\"Submission error:\", error);\n      setErrors((prev) => ({\n        ...prev,\n        submit: (error as any)?.message || \"Failed to save memory\",\n      }));\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if (validateForm()) {\n      await onFormSubmit();\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-#251a1d via-#1a1315 to-#251a1d text-white flex items-center justify-center px-4 py-8\">\n      <div className=\"w-full max-w-2xl\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1\n            className=\"text-3xl tracking-wider\"\n            style={{ color: \"var(--accent)\" }}\n          >\n            ADD A NEW MEMORY\n          </h1>\n          <p className=\"text-gray-400 text-sm tracking-widest mt-2\">\n            CAPTURE A SPECIAL MOMENT TOGETHER\n          </p>\n        </div>\n\n        {/* Form Container */}\n        <form\n          onSubmit={handleSubmit}\n          className=\"bg-black/40 backdrop-blur-sm border rounded-lg p-8 space-y-6\"\n          style={{ borderColor: \"var(--border)\" }}\n        >\n          {/* Title Field */}\n          <div>\n            <label\n              className=\"block text-xs font-semibold mb-2 uppercase tracking-widest\"\n              style={{ color: \"var(--accent)\" }}\n            >\n              Title <span style={{ color: \"var(--destructive)\" }}>*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) => handleInputChange(\"title\", e.target.value)}\n              onFocus={() => setFocusedField(\"title\")}\n              onBlur={() => setFocusedField(null)}\n              placeholder=\"Our picnic at the park\"\n              className=\"w-full bg-black/60 text-white placeholder-gray-500 px-4 py-3 rounded-lg border-2 transition-all duration-300 focus:outline-none\"\n              style={{\n                borderColor:\n                  focusedField === \"title\"\n                    ? \"var(--accent)\"\n                    : errors.title\n                    ? \"var(--destructive)\"\n                    : \"var(--border)\",\n              }}\n            />\n            {errors.title && (\n              <p\n                className=\"text-xs mt-1\"\n                style={{ color: \"var(--destructive)\" }}\n              >\n                {errors.title}\n              </p>\n            )}\n          </div>\n\n          {/* Date Field */}\n          <div>\n            <label\n              className=\"block text-xs font-semibold mb-2 uppercase tracking-widest\"\n              style={{ color: \"var(--accent)\" }}\n            >\n              Date <span style={{ color: \"var(--destructive)\" }}>*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={formData.date}\n              onChange={(e) => handleInputChange(\"date\", e.target.value)}\n              onFocus={() => setFocusedField(\"date\")}\n              onBlur={() => setFocusedField(null)}\n              placeholder=\"mm/dd/yyyy, --:-- --\"\n              maxLength={10}\n              className=\"w-full bg-black/60 text-white placeholder-gray-500 px-4 py-3 rounded-lg border-2 transition-all duration-300 focus:outline-none\"\n              style={{\n                borderColor:\n                  focusedField === \"date\"\n                    ? \"var(--accent)\"\n                    : errors.date\n                    ? \"var(--destructive)\"\n                    : \"var(--border)\",\n              }}\n            />\n            {errors.date && (\n              <p\n                className=\"text-xs mt-1\"\n                style={{ color: \"var(--destructive)\" }}\n              >\n                {errors.date}\n              </p>\n            )}\n          </div>\n\n          {/* Location Field */}\n          <div>\n            <label\n              className=\"block text-xs font-semibold mb-2 uppercase tracking-widest\"\n              style={{ color: \"var(--accent)\" }}\n            >\n              Location\n            </label>\n            <input\n              type=\"text\"\n              value={formData.location}\n              onChange={(e) => handleInputChange(\"location\", e.target.value)}\n              onFocus={() => setFocusedField(\"location\")}\n              onBlur={() => setFocusedField(null)}\n              placeholder=\"Central Park\"\n              className=\"w-full bg-black/60 text-white placeholder-gray-500 px-4 py-3 rounded-lg border-2 transition-all duration-300 focus:outline-none\"\n              style={{\n                borderColor:\n                  focusedField === \"location\"\n                    ? \"var(--accent)\"\n                    : \"var(--border)\",\n              }}\n            />\n          </div>\n\n          {/* What We Did Field */}\n          <div>\n            <label\n              className=\"block text-xs font-semibold mb-2 uppercase tracking-widest\"\n              style={{ color: \"var(--accent)\" }}\n            >\n              What we did\n            </label>\n            <textarea\n              value={formData.whatWeDid}\n              onChange={(e) => handleInputChange(\"whatWeDid\", e.target.value)}\n              onFocus={() => setFocusedField(\"whatWeDid\")}\n              onBlur={() => setFocusedField(null)}\n              placeholder=\"Had sandwiches, played frisbee, watched the sunset...\"\n              rows={3}\n              className=\"w-full bg-black/60 text-white placeholder-gray-500 px-4 py-3 rounded-lg border-2 transition-all duration-300 resize-none focus:outline-none\"\n              style={{\n                borderColor:\n                  focusedField === \"whatWeDid\"\n                    ? \"var(--accent)\"\n                    : \"var(--border)\",\n              }}\n            />\n          </div>\n\n          {/* Thoughts & Reflections Field */}\n          <div>\n            <label\n              className=\"block text-xs font-semibold mb-2 uppercase tracking-widest\"\n              style={{ color: \"var(--accent)\" }}\n            >\n              Our thoughts & reflections\n            </label>\n            <textarea\n              value={formData.thoughts}\n              onChange={(e) => handleInputChange(\"thoughts\", e.target.value)}\n              onFocus={() => setFocusedField(\"thoughts\")}\n              onBlur={() => setFocusedField(null)}\n              placeholder=\"The weather was perfect. We laughed so much. I never want to forget this day...\"\n              rows={4}\n              className=\"w-full bg-black/60 text-white placeholder-gray-500 px-4 py-3 rounded-lg border-2 transition-all duration-300 resize-none focus:outline-none\"\n              style={{\n                borderColor:\n                  focusedField === \"thoughts\"\n                    ? \"var(--accent)\"\n                    : \"var(--border)\",\n              }}\n            />\n          </div>\n\n          {/* Photos Upload */}\n          <div>\n            <label\n              className=\"block text-xs font-semibold mb-2 uppercase tracking-widest\"\n              style={{ color: \"var(--accent)\" }}\n            >\n              Photos\n            </label>\n\n            {/* Upload Area */}\n            <div\n              onClick={() => fileInputRef.current?.click()}\n              className=\"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-black/40 transition-all duration-300\"\n              style={{ borderColor: \"var(--border)\" }}\n              onMouseEnter={(e) =>\n                (e.currentTarget.style.borderColor = \"var(--accent)\")\n              }\n              onMouseLeave={(e) =>\n                (e.currentTarget.style.borderColor = \"var(--border)\")\n              }\n            >\n              <Upload className=\"w-8 h-8 mx-auto mb-2 text-gray-400\" />\n              <p className=\"text-gray-400 text-sm\">Click to upload photos</p>\n            </div>\n\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              multiple\n              accept=\"image/*\"\n              onChange={handlePhotoUpload}\n              className=\"hidden\"\n            />\n\n            {errors.photos && (\n              <p\n                className=\"text-xs mt-2\"\n                style={{ color: \"var(--destructive)\" }}\n              >\n                {errors.photos}\n              </p>\n            )}\n\n            {/* Uploaded Photos Preview */}\n            {uploadedPhotos.length > 0 && (\n              <div className=\"mt-4 grid grid-cols-3 gap-3\">\n                {uploadedPhotos.map((photo, index) => (\n                  <div key={index} className=\"relative group\">\n                    <img\n                      src={photo.previewUrl}\n                      alt={photo.name}\n                      className=\"w-full h-24 object-cover rounded border-2\"\n                      style={{ borderColor: \"var(--accent)\" }}\n                    />\n                    {photo.uploaded && (\n                      <div className=\"absolute top-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded\">\n                        ✓\n                      </div>\n                    )}\n                    <button\n                      type=\"button\"\n                      onClick={() => removePhoto(index)}\n                      className=\"absolute top-1 right-1 w-6 h-6 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-xs\"\n                      style={{ backgroundColor: \"var(--destructive)\" }}\n                    >\n                      ×\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={uploading || saving}\n            className=\"w-full text-white py-3 rounded-lg font-semibold transition-all duration-300 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wider text-sm\"\n            style={{\n              backgroundColor: \"var(--primary)\",\n            }}\n            onMouseEnter={(e) =>\n              !uploading &&\n              !saving &&\n              (e.currentTarget.style.backgroundColor = \"var(--accent)\")\n            }\n            onMouseLeave={(e) =>\n              !uploading &&\n              !saving &&\n              (e.currentTarget.style.backgroundColor = \"var(--primary)\")\n            }\n          >\n            {uploading\n              ? \"Uploading photos...\"\n              : saving\n              ? \"Saving memory...\"\n              : \"Save Memory\"}\n          </button>\n\n          {errors.submit && (\n            <p\n              className=\"text-sm text-center\"\n              style={{ color: \"var(--destructive)\" }}\n            >\n              {errors.submit}\n            </p>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}